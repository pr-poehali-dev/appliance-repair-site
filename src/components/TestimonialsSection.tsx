import React from 'react';
import { ChevronLeft, ChevronRight, Star } from 'lucide-react';
import { Button } from '@\u2Fcomponents\u2Fui\u2Fbutton';

type Testimonial = {
  id: number;
  name: string;
  photo: string;
  text: string;
  rating: number;
  service: string;
  date: string;
};

const TestimonialsSection: React.FC = () => {
  // Данные отзывов
  const testimonials: Testimonial[] = [
    {
      id: 1,
      name: '\u0410\u043d\u043d\u0430 \u0421\u043e\u043a\u043e\u043b\u043e\u0432\u0430',
      photo: 'https:\/\/images.unsplash.com\/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=150&q=80',
      text: '\u0412\u044b\u0437\u0432\u0430\u043b\u0430 \u043c\u0430\u0441\u0442\u0435\u0440\u0430 \u0434\u043b\u044f \u0440\u0435\u043c\u043e\u043d\u0442\u0430 \u0441\u0442\u0438\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u043c\u0430\u0448\u0438\u043d\u044b. \u041f\u0440\u0438\u0435\u0445\u0430\u043b \u0432 \u0442\u043e\u0442 \u0436\u0435 \u0434\u0435\u043d\u044c, \u0431\u044b\u0441\u0442\u0440\u043e \u043d\u0430\u0448\u0435\u043b \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u043f\u043e\u043b\u043e\u043c\u043a\u0438 \u0438 \u0432\u0441\u0435 \u043f\u043e\u0447\u0438\u043d\u0438\u043b. \u041c\u0430\u0448\u0438\u043d\u043a\u0430 \u0441\u043d\u043e\u0432\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043a\u0430\u043a \u043d\u043e\u0432\u0430\u044f! \u041e\u0447\u0435\u043d\u044c \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u0430 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435\u043c.',
      rating: 5,
      service: '\u0420\u0435\u043c\u043e\u043d\u0442 \u0441\u0442\u0438\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u043c\u0430\u0448\u0438\u043d\u044b',
      date: '15.04.2025'
    },
    {
      id: 2,
      name: '\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u041f\u0435\u0442\u0440\u043e\u0432',
      photo: 'https:\/\/images.unsplash.com\/photo-1570295999919-56ceb5ecca61?ixlib=rb-1.2.1&auto=format&fit=crop&w=150&q=80',
      text: '\u041e\u0431\u0440\u0430\u0449\u0430\u043b\u0441\u044f \u043f\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u0443 \u0440\u0435\u043c\u043e\u043d\u0442\u0430 \u0445\u043e\u043b\u043e\u0434\u0438\u043b\u044c\u043d\u0438\u043a\u0430. \u041c\u0430\u0441\u0442\u0435\u0440 \u043f\u0440\u0438\u0435\u0445\u0430\u043b \u0441 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u043c\u0438 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u044f\u043c\u0438 \u0438 \u0432\u0441\u0435 \u043e\u0442\u0440\u0435\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043b \u0437\u0430 \u043e\u0434\u0438\u043d \u0432\u0438\u0437\u0438\u0442. \u0426\u0435\u043d\u0430 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u043b\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u043d\u043e\u0439, \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439.',
      rating: 5,
      service: '\u0420\u0435\u043c\u043e\u043d\u0442 \u0445\u043e\u043b\u043e\u0434\u0438\u043b\u044c\u043d\u0438\u043a\u0430',
      date: '02.04.2025'
    },
    {
      id: 3,
      name: '\u0415\u043b\u0435\u043d\u0430 \u0421\u043c\u0438\u0440\u043d\u043e\u0432\u0430',
      photo: 'https:\/\/images.unsplash.com\/photo-1580489944761-15a19d654956?ixlib=rb-1.2.1&auto=format&fit=crop&w=150&q=80',
      text: '\u0421\u043b\u043e\u043c\u0430\u043b\u0430\u0441\u044c \u043f\u043e\u0441\u0443\u0434\u043e\u043c\u043e\u0435\u0447\u043d\u0430\u044f \u043c\u0430\u0448\u0438\u043d\u0430, \u0432\u044b\u0437\u0432\u0430\u043b\u0430 \u043c\u0430\u0441\u0442\u0435\u0440\u0430 \u0438\u0437 \u044d\u0442\u043e\u0439 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438. \u041f\u0440\u0438\u044f\u0442\u043d\u043e \u0443\u0434\u0438\u0432\u0438\u043b\u043e, \u0447\u0442\u043e \u043c\u0430\u0441\u0442\u0435\u0440 \u0441\u043c\u043e\u0433 \u043f\u043e\u0447\u0438\u043d\u0438\u0442\u044c \u0442\u0435\u0445\u043d\u0438\u043a\u0443 \u0432 \u0442\u043e\u0442 \u0436\u0435 \u0434\u0435\u043d\u044c. \u0414\u0430\u043b \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438.' ,
      rating: 4,
      service: '\u0420\u0435\u043c\u043e\u043d\u0442 \u043f\u043e\u0441\u0443\u0434\u043e\u043c\u043e\u0435\u0447\u043d\u043e\u0439 \u043c\u0430\u0448\u0438\u043d\u044b',
      date: '28.03.2025'
    },
    {
      id: 4,
      name: '\u0421\u0435\u0440\u0433\u0435\u0439 \u0418\u0432\u0430\u043d\u043e\u0432',
      photo: 'https:\/\/images.unsplash.com\/photo-1507003211169-0a1dd7228f2d?ixlib=rb-1.2.1&auto=format&fit=crop&w=150&q=80',
      text: '\u041e\u0431\u0440\u0430\u0442\u0438\u043b\u0441\u044f \u0441 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u043e\u0439 \u0432 \u044d\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043f\u043b\u0438\u0442\u0435. \u041c\u0430\u0441\u0442\u0435\u0440 \u043f\u0440\u0438\u0435\u0445\u0430\u043b \u0432 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f, \u0431\u044b\u0441\u0442\u0440\u043e \u0432\u044b\u044f\u0432\u0438\u043b \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u044c \u0438 \u043f\u043e\u0447\u0438\u043d\u0438\u043b. \u041f\u0440\u043e\u0448\u043b\u043e \u0443\u0436\u0435 3 \u043c\u0435\u0441\u044f\u0446\u0430, \u0432\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u043d\u043e.' ,
      rating: 5,
      service: '\u0420\u0435\u043c\u043e\u043d\u0442 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043f\u043b\u0438\u0442\u044b',
      date: '10.03.2025'
    }
  ];

  // \u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0434\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u043e\u0433\u043e \u0441\u043b\u0430\u0439\u0434\u0430
  const [currentSlide, setCurrentSlide] = React.useState(0);
  const [slidesToShow, setSlidesToShow] = React.useState(3);

  // \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043e\u043a\u043d\u0430
  React.useEffect(() => {
    const handleResize = () => {
      if (window.innerWidth < 640) {
        setSlidesToShow(1);
      } else if (window.innerWidth < 1024) {
        setSlidesToShow(2);
      } else {
        setSlidesToShow(3);
      }
    };

    // \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f
    handleResize();

    // \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u044f \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043e\u043a\u043d\u0430
    window.addEventListener('resize', handleResize);

    // \u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u044f \u043f\u0440\u0438 \u0440\u0430\u0437\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  // \u0424\u0443\u043d\u043a\u0446\u0438\u0438 \u0434\u043b\u044f \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u0438 \u043f\u043e \u0441\u043b\u0430\u0439\u0434\u0435\u0440\u0443
  const nextSlide = () => {
    setCurrentSlide((prevSlide) => 
      (prevSlide + 1) % (testimonials.length - slidesToShow + 1)
    );
  };

  const prevSlide = () => {
    setCurrentSlide((prevSlide) => 
      prevSlide === 0 ? testimonials.length - slidesToShow : prevSlide - 1
    );
  };

  // \u041e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0430 \u0437\u0432\u0435\u0437\u0434 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0430
  const renderStars = (rating: number) => {
    return Array(5).fill(0).map((_, i) => (
      <Star 
        key={i} 
        className={`h-5 w-5 ${i < rating ? 'text-yellow-500 fill-yellow-500' : 'text-gray-300'}`} 
      />
    ));
  };

  return (
    <section id=